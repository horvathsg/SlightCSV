Slight\+C\+SV is a C\+SV parser library written in C++. Its main purpose is to facilitate the programmatic processing of C\+SV files.

\subsection*{Features}


\begin{DoxyItemize}
\item Customizable delimiter and escape characters.
\item Flexible character manipulation capabilities (stripping, replacement).
\item Automatic handling of mac\+OS, Linux and Windows line endings.
\item Query methods for getting cell, row and column data with automatic type conversion capabilities.
\item Able to load large files ($>$ 1 GB) in reasonable time.
\item Custom exception classes inheriting from std\+::exception.
\end{DoxyItemize}

\subsection*{In addition}


\begin{DoxyItemize}
\item Detailed documentation (Doxygen).
\item Automated unit and integration testing (Cpp\+U\+Test, gcov, lcov).
\item Example code.
\end{DoxyItemize}

\section*{Getting started}

\subsection*{Operation}

After constructing the Slight\+C\+SV object (and before loading data from C\+SV file), parameters need to be set up through Slight\+C\+SV\textquotesingle{}s setter methods. File loading and processing doesn\textquotesingle{}t happen until triggering data loading through the A\+PI. If a mandatory parameter is not set, an exception will be thrown. After loading finished, data is accessible through data getter methods. Data may be unloaded later and the object can be resetted to its initial state. However, this is not mandatory as the library is only using dynamic memory with appropriate release technique (R\+A\+II).

\subsection*{Dependencies}

Slight\+C\+SV has no external dependencies. However, the following tools are used in the build pipeline to support build management, code quality and documentation.


\begin{DoxyItemize}
\item C\+Make.
\item Cpp\+U\+Test.
\item gcov, lcov.
\item Doxygen.
\end{DoxyItemize}

It is recommended to install those missing before proceeding.

\subsection*{Platform}

At the present time, the development platform is Linux. While it is possible to build and use the library on Windows, various stages of the build pipeline might fail because of missing headers and/or libraries (namely automated testing, documentation generation and code coverage report generation).

\subsection*{Project structure}

The structure inside the project root directory is as follows.


\begin{DoxyItemize}
\item bin\+: demo application build output.
\item build\+: build directory.
\item doc\+: Doxygen configuration and output.
\item inc\+: public header output (in subdirectory slightcsv).
\item lib\+: shared library output directory.
\item src\+: library and demo application sources.
\item test\+: unit and integration tests.
\end{DoxyItemize}

In order to use the pre-\/built shared library, you just need the public header (\hyperlink{slightcsv_8hpp_source}{slightcsv.\+hpp}) from inc and the library (libslightcsv.\+so or libslightcsv.\+dll on Windows) from lib.

\subsection*{Configuration and building}

For building the library from source\+:


\begin{DoxyItemize}
\item Have dependencies installed and available in the environment.
\item Edit C\+Make config file (C\+Make\+Lists.\+txt) in test and set Cpp\+U\+Test path variables.
\item Run \char`\"{}cmake .. -\/\+D\+C\+M\+A\+K\+E\+\_\+\+B\+U\+I\+L\+D\+\_\+\+T\+Y\+P\+E=\+D\+E\+B\+U\+G\char`\"{} or \char`\"{}cmake .. -\/\+D\+C\+M\+A\+K\+E\+\_\+\+B\+U\+I\+L\+D\+\_\+\+T\+Y\+P\+E=\+R\+E\+L\+E\+A\+S\+E\char`\"{} in build directory for C\+Make to generate build configuration files. In D\+E\+B\+UG, the library is built with debug symbols included while in R\+E\+L\+E\+A\+SE, those are not present (R\+E\+L\+E\+A\+SE builds use compiler optimization as well).
\item Run \char`\"{}make clean\char`\"{} in build directory to cleanup.
\item Run \char`\"{}make\char`\"{} in build directory to build the library. After issuing the command, artifacts are built and/or run in the following order\+: Slight\+C\+SV build, tests build, tests run, demo build. At the end of each stage, output files are placed in their respective directories (shared library file in lib, public header file in inc/slightcsv and executable demo application in bin).
\item Install sections are commented out in C\+Make\textquotesingle{}s config files. If you would like to use \char`\"{}make install\char`\"{}, uncomment those rows and set target paths according to your preference.
\item Documentation may be generated by issuing command \char`\"{}make docs\char`\"{}. Documentation is generated into the doc folder.
\item Code coverage report may be generated by issuing command \char`\"{}make codecov\char`\"{}. Report index file can be found at\+: build/src/\+C\+Make\+Files/slightcsv.\+dir/codecov/index.html.
\end{DoxyItemize}

\subsection*{Usage}

After including the public header in your project, you can start with the following simple example. For additional methods and parameters, please refer to the Doxygen documentation located in the doc folder.


\begin{DoxyCode}
\textcolor{preprocessor}{#include "slightcsv.hpp"}
\textcolor{preprocessor}{#include <iostream>}
\textcolor{preprocessor}{#include <string>}
\textcolor{preprocessor}{#include <vector>}

\textcolor{keyword}{using} std::cout;
\textcolor{keyword}{using} std::endl;
\textcolor{keyword}{using} std::string;
\textcolor{keyword}{using} std::vector;
\textcolor{keyword}{using} std::set;
\textcolor{keyword}{using} std::pair;
\textcolor{keyword}{using} std::map;
\textcolor{keyword}{using} \hyperlink{classutils_1_1SlightCSV}{utils::SlightCSV};

\textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[]) \{

    \textcolor{comment}{// construct object}
    SlightCSV scsv;

    \textcolor{comment}{// set filename}
    scsv.\hyperlink{classutils_1_1SlightCSV_a9567504e450440a9564053c8ab6f6ff9}{setFileName}(\textcolor{stringliteral}{"../test/env\_data.csv"});
    \textcolor{comment}{// set delimiter character (semicolon)}
    scsv.setSeparator(\textcolor{charliteral}{';'});
    \textcolor{comment}{// set escape character (double quote)}
    scsv.setEscape(\textcolor{charliteral}{'\(\backslash\)"'});
    \textcolor{comment}{// set characters to be stripped (stip spaces and underscores)}
    set<char> to\_strip;
    to\_strip.insert(\textcolor{charliteral}{' '});
    to\_strip.insert(\textcolor{charliteral}{'\_'});
    scsv.setStripChars(to\_strip);
    \textcolor{comment}{// set characters to be replaced (replace 'a' with 'b' and 'c' with 'd')}
    map<char, char> to\_replace;
    pair<char, char> to\_replace1(\textcolor{charliteral}{'a'}, \textcolor{charliteral}{'b'});
    pair<char, char> to\_replace2(\textcolor{charliteral}{'c'}, \textcolor{charliteral}{'d'});
    to\_replace.insert(to\_replace1);
    to\_replace.insert(to\_replace2);
    scsv.setReplaceChars(to\_replace);

    \textcolor{comment}{// load data}
    scsv.loadData();

    \textcolor{comment}{// output entity counts}
    cout << \textcolor{stringliteral}{"File contains "} << scsv.getColumnCount() << \textcolor{stringliteral}{" columns."} << endl;
    cout << \textcolor{stringliteral}{"File contains "} << scsv.getRowCount() << \textcolor{stringliteral}{" rows."} << endl;
    cout << \textcolor{stringliteral}{"Header count: "} << scsv.getHeaderCount() << \textcolor{stringliteral}{" rows."} << endl;

    \textcolor{comment}{// output row 501 (at index 500)}
    vector<string> row;
    scsv.getRow(row, 500);
    cout << \textcolor{stringliteral}{"Row 501 is: "} << endl;
    \textcolor{keywordflow}{for} (vector<string>::iterator it = row.begin(); it != row.end(); ++it) \{
        cout << *it << \textcolor{stringliteral}{" "};
    \}

    \textcolor{comment}{// output column 22 (at index 21)}
    vector<string> column;
    scsv.getColumn(column, 21);
    cout << \textcolor{stringliteral}{"Column 22 is: "} << endl;
    \textcolor{keywordflow}{for} (vector<string>::iterator it = column.begin(); it != column.end(); ++it) \{
        cout << *it << endl;
    \}

    \textcolor{comment}{// reset object to initial state (before reuse, e.g. loading another file)}
    scsv.reset();

\}
\end{DoxyCode}


\section*{Future development}

Features to be implemented in the future\+:


\begin{DoxyItemize}
\item C++11 compliant multithreading for even faster processing
\item support for U\+T\+F-\/8 character encoding
\item Extended transformation and conversion support for rows and columns
\end{DoxyItemize}

Ideas, contributions, issues and comments are welcome! 